(this["webpackJsonpgame-database"]=this["webpackJsonpgame-database"]||[]).push([[0],{12:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(4),l=a.n(s),r=(a(12),a(6)),o=a(1),c=a.n(o),h=a(2);var m=e=>{const t=e.wishlistState.map((t,a)=>i.a.createElement("div",{className:"wishlist-item",key:a},i.a.createElement("div",{className:"wishlist-img"},i.a.createElement("img",{src:t.poster,alt:"wishlist-item"})),i.a.createElement("p",{className:"title"},t.title),i.a.createElement("p",{className:"year"},t.year),i.a.createElement("span",{id:a,className:"remove",onClick:()=>e.removeWishlist(void 0,a)},"x")));return i.a.createElement("div",{id:"wishlist"},i.a.createElement("button",{className:"wishlist-btn"},i.a.createElement("i",{className:"material-icons"},"local_movies"),i.a.createElement("div",{className:"dropdown-content"},e.wishlistState.length>0?t:"- Wishlist Empty -")))};class d extends i.a.Component{render(){let e=this.props.movieState?"top":"",t=this.props.dropdownState.map((e,t)=>i.a.createElement("option",{value:e,key:t}));return i.a.createElement("div",{id:"search-container"},i.a.createElement(m,{wishlistState:this.props.wishlistState,removeWishlist:this.props.removeWishlist}),i.a.createElement("form",{className:"search-bar ".concat(e),onSubmit:e=>e.preventDefault()},i.a.createElement("label",{htmlFor:"search"},i.a.createElement("h1",null,"LOOK FOR A MOVIE")),i.a.createElement("input",{list:"options",id:"search",type:"text",value:this.props.input,name:"search",onChange:e=>this.props.handleChange(e),onKeyDown:this.props.dropdownSelect}),i.a.createElement("datalist",{id:"options"},t)))}}var u=d;var v=e=>{let t=e.state;if(null!==t|void 0){let a="active",n=function(e){let t=[],a=e.match(/[^/10]+/gi),n=Number(a/2);for(let i=1;i<6;i++)i<n?t.push("fa fa-star"):i-.5<=n?t.push("fa fa-star-half-full"):t.push("fa fa-star-o");return t}(t.Ratings[0].Value).map((e,t)=>i.a.createElement("i",{className:e,key:t})),s=t.Released.match(/\d+$/g);return i.a.createElement("div",{id:"bulletpoints",className:a},i.a.createElement("div",{id:"poster"},i.a.createElement("img",{src:t.Poster,alt:"movie-poster"})),i.a.createElement("div",{className:"movie-bulletpoints"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("h1",{id:"movie-title"},t.Title)),i.a.createElement("li",{id:"release-year"},s),i.a.createElement("li",{id:"genre"},t.Genre),i.a.createElement("li",null,i.a.createElement("a",{href:"#","data-easing":"easeInCubic",onClick:e.SmoothScroll,id:"details-buton"},"DETAILS"),i.a.createElement("button",{title:"Add To Wishlist",id:"add_wishlist",onClick:e.addWishlist},i.a.createElement("span",null,"+"))),i.a.createElement("li",null,i.a.createElement("div",{id:"stars"},n),i.a.createElement("div",{id:"rating"},t.Ratings[0].Value)))))}return i.a.createElement("div",{id:"bulletpoints",className:""})};var p=e=>{let t=e.state;if(t){let e="active";return i.a.createElement("div",{id:"details",className:e},i.a.createElement("div",{className:"overview-container"},i.a.createElement("div",{className:"inner-container"},i.a.createElement("h2",null,"Overview"),i.a.createElement("h3",{id:"overview"},t.Plot))),i.a.createElement("div",{className:"details-container"},i.a.createElement("div",{className:"inner-container"},i.a.createElement("h2",null,"Details"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("h4",null,"Director:"),i.a.createElement("h5",null,t.Director)),i.a.createElement("li",null,i.a.createElement("h4",null,"Actors:"),i.a.createElement("h5",null,t.Actors)),i.a.createElement("li",null,i.a.createElement("h4",null,"Language:"),i.a.createElement("h5",null,t.Language)),i.a.createElement("li",null,i.a.createElement("h4",null,"Genre:"),i.a.createElement("h5",null,t.Genre)),i.a.createElement("li",null,i.a.createElement("h4",null,"Runtime:"),i.a.createElement("h5",null,t.Runtime)),i.a.createElement("li",null,i.a.createElement("h4",null,"Production:"),i.a.createElement("h5",null,t.Production))))))}return i.a.createElement("div",{id:"details",className:""})};var E=e=>{const t={opacity:.75},a=e.reccState.map((a,n)=>i.a.createElement("div",{id:"recommendation-".concat(n+1),key:n,onClick:()=>e.handleClick(void 0,n)},i.a.createElement("a",{href:"#search-container"},i.a.createElement("img",{src:a.Poster,alt:"Movie-Poster"})),i.a.createElement("div",{id:"recommendation-info-".concat(n+1),key:n,onMouseEnter:()=>e.onMouseEnter(void 0,n),onMouseLeave:e.onMouseLeave,style:e.hover===n?t:null},i.a.createElement("h2",null,a.Title),i.a.createElement("h4",null,a.Year))));return i.a.createElement("div",{id:"recommendations"},i.a.createElement("h1",null," Recommendations"),i.a.createElement("div",{id:"container"},a))};var w=e=>i.a.createElement("footer",{id:"footer"},i.a.createElement("span",{className:"arrow-container",onClick:()=>{e.scroll(1)}},i.a.createElement("span",{className:"shape1"}),i.a.createElement("span",{className:"shape2"})),i.a.createElement("div",null,"Marinos Chrysanthou"),i.a.createElement("div",null,"2018"),i.a.createElement("div",null,"Powered by React"));const f="https://www.omdbapi.com/",g="be0b8d09";var b=a(5),S=a.n(b);a(14);class M extends n.Component{constructor(e){super(e),this.state={currentMovie:null,recommendations:[],input:"",dropdown:[],hover:null,wishlist:[]},this.loadRecMovie=this.loadRecMovie.bind(this),this.searchMovies=this.searchMovies.bind(this),this.handleChange=this.handleChange.bind(this),this.fetchMovie=this.fetchMovie.bind(this),this.smoothScroll=this.smoothScroll.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.addWishlist=this.addWishlist.bind(this),this.removeWishlist=this.removeWishlist.bind(this)}componentWillMount(){this.loadRecommendations("The-Nun","Blade-Runner","Doctor.Strange");const e=localStorage.getItem("my_movies");e&&this.setState({wishlist:JSON.parse(e)})}componentWillUpdate(e,t){localStorage.setItem("my_movies",JSON.stringify(t.wishlist))}fetchMovie(e){var t=this;return Object(h.a)(c.a.mark((function a(){var n,i,s,l,r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(13!==e.keyCode){a.next=11;break}return n=e.target.value.match(/.*(?=\s-)/gi),i=e.target.value.match(/\d+$/g),s="".concat(f,"?apikey=").concat(g,"&plot=full&t=").concat(n,"&y=").concat(i),a.next=6,fetch(s);case 6:return l=a.sent,a.next=9,l.json();case 9:r=a.sent,t.setState({currentMovie:r});case 11:case"end":return a.stop()}}),a)})))()}fetchRecommendations(e,t){var a=this;return Object(h.a)(c.a.mark((function n(){var i,s,l,r,o,h,m;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=void 0===t?"":t,s="".concat(f,"?apikey=").concat(g,"&plot=full&i=").concat(e,"&t=").concat(i),n.next=4,fetch(s);case 4:return l=n.sent,n.next=7,l.json();case 7:r=n.sent,(o=[...a.state.recommendations]).push(r),h=o?o.slice(-4):null,m=h.map(e=>"".concat(e.Title," - ").concat(e.Year)),a.setState({recommendations:h,dropdown:m});case 13:case"end":return n.stop()}}),n)})))()}searchMovies(e){var t=this;return Object(h.a)(c.a.mark((function a(){var n,i,s;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.length>0)){a.next=9;break}return n="".concat(f,"?&apikey=").concat(g,"&type=movie&s=").concat(e),a.next=4,fetch(n);case 4:return i=a.sent,a.next=7,i.json();case 7:"True"===(s=a.sent).Response&&s.Search.slice(0,4).map(e=>{if("N/A"!==e.Poster){let a=t.state.recommendations.map(e=>e.imdbID);-1===Object.values(a).indexOf(e.imdbID)&&t.fetchRecommendations(e.imdbID)}return null});case 9:case"end":return a.stop()}}),a)})))()}addWishlist(){let e=this.state.currentMovie,t={imdbID:e.imdbID,title:e.Title,poster:e.Poster,year:e.Year},a=[...this.state.wishlist];a.push(t),this.setState({wishlist:a})}removeWishlist(e,t){let a=[...this.state.wishlist].splice(t+1),n=[...this.state.wishlist].splice(0,t).concat(a);this.setState({wishlist:n})}loadRecMovie(e,t){this.smoothScroll(1);let a=Object(r.a)({},this.state.recommendations[t]);this.setState({currentMovie:a})}loadRecommendations(){Object.values(arguments).map(e=>(this.fetchRecommendations("",e),null))}handleChange(e){let t=e.target.value;this.setState({input:t}),this.searchMovies(t)}smoothScroll(e){S.a.shim(),1===e?window.scrollTo(0,0):window.scrollTo(0,700)}onMouseEnter(e,t){this.setState({hover:t})}onMouseLeave(){this.setState({hover:null})}render(){return i.a.createElement("main",{className:"container"},i.a.createElement(u,{movieState:this.state.currentMovie,dropdownState:this.state.dropdown,wishlistState:this.state.wishlist,dropdownSelect:this.fetchMovie,input:this.state.input,handleChange:this.handleChange,removeWishlist:this.removeWishlist}),i.a.createElement(v,{state:this.state.currentMovie,SmoothScroll:this.smoothScroll,addWishlist:this.addWishlist}),i.a.createElement(p,{state:this.state.currentMovie}),i.a.createElement(E,{handleClick:this.loadRecMovie,reccState:this.state.recommendations,hover:this.state.hover,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave}),i.a.createElement(w,{scroll:this.smoothScroll}))}}var k=M;const y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}l.a.render(i.a.createElement(k,null),document.getElementById("app")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");y?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):N(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):N(e)})}}()},7:function(e,t,a){e.exports=a(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.f00ac7bd.chunk.js.map